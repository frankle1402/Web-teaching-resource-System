## 📦 教师端系统框架设计文档（MVP版本）

---

### 🧭 总体结构说明

教师端采用前后端分离架构，前端使用 Vue 3 + Vite 构建，后端提供接口服务（用户认证、资源管理等）。页面初始化后检测登录状态，无登录则跳转至扫码登录页。

所有 UI 框架统一使用 **Element Plus（基于 Vue3）**，样式使用 **TailwindCSS** 进行定制，引用 **阿里云/腾讯云 CDN**。

---

## 🔐 1. 微信扫码登录功能

### 功能描述：

教师访问平台后，如未登录，将被引导到扫码登录页。使用微信扫码后，系统获取用户 openid 并请求绑定手机号（通过微信服务端），生成用户会话，写入本地存储。
现在阶段请只需要做一个页面，带一个虚拟的二维码图片占位符，然后点击这个占位符就可以直接进入系统，不需要真实的登录。

### 页面交互：

1. 用户访问平台 `/`
2. 检测到未登录 → 自动重定向至 `/login`
3. 登录页展示微信二维码
4. 用户扫码 → 后端确认 openid → 返回 token + 用户信息
5. 存储 sessionToken 到本地（localStorage or Cookie）
6. 跳转至教师工作台 `/dashboard`

### 接口说明：

```
GET /api/auth/wechat-qrcode
- 返回二维码链接与扫码状态ID

POST /api/auth/check-status
- 参数：状态ID
- 返回：是否登录成功，若成功则返回 openid、手机号、用户ID、token

POST /api/auth/bind-user
- 创建或更新用户表
```

### 后端数据要求：

* 表名：`users`

  * openid：微信用户唯一ID
  * phone：手机号
  * created_at / last_login

---

## 🖥️ 2. 教师工作台页面（/dashboard）

### 页面布局结构：

```
┌────────────────────────────┐
│ 顶部导航栏（logo + 用户信息 + 退出）   │
├─────────┬───────────────────┤
│ 左侧菜单栏 │ 主内容区域（可切换视图）    │
├─────────┴───────────────────┤
│ 页脚：版权 & 链接等                  │
└────────────────────────────┘
```

### 顶部导航栏

* LOGO（跳转首页）
* 当前用户手机号（右上角）
* “退出登录”按钮 → 清除 Token，返回登录页

### 左侧菜单栏（Element Plus Menu）

| 菜单项      | 路由                   | 描述                |
| -------- | -------------------- | ----------------- |
| 我的资源     | /dashboard/resources | 显示教师创建的教学资源列表     |
| 新建资源     | /dashboard/create    | 创建教学资源（AI + 编辑流程） |
| 我的文件夹    | /dashboard/folders   | 教学资源归档分类视图        |
| 模板中心（可选） | /dashboard/templates | 查看可选模板或默认模板（只读）   |
| 设置/帮助    | /dashboard/help      | 使用说明、帮助文档入口       |

### 主内容区域

根据左侧导航点击加载对应视图组件（使用 Vue Router）。每个子模块页面将独立开发、按需加载。

---

## 🧱 开发结构建议

### Vue 项目结构示例

```
/src
├── assets/                # 静态资源
├── components/            # 公共组件（导航栏、菜单、帮助组件等）
├── pages/
│   ├── Login.vue
│   ├── Dashboard.vue
│   ├── Resources.vue
│   ├── CreateResource.vue
│   └── ...
├── router/
│   └── index.js           # 路由定义
├── store/
│   └── user.js            # 用户状态管理（Pinia 或 Vuex）
├── utils/
│   └── auth.js            # token处理、API封装
├── App.vue
└── main.js
```

---

## 🎨 样式与CDN引入

* 全站统一使用 TailwindCSS（通过 CDN 注入或按需编译）
* 所有样式 / JS 框架均通过国内 CDN（推荐用阿里云CDN或腾讯云CDN）：

```html
<!-- Vue 3 CDN -->
<script src="https://cdn.staticfile.org/vue/3.2.47/vue.global.prod.min.js"></script>
<!-- Element Plus CDN -->
<link rel="stylesheet" href="https://unpkg.byted-static.com/element-plus/2.2.28/index.css" />
<script src="https://unpkg.byted-static.com/element-plus/2.2.28/index.full.min.js"></script>
<!-- Tailwind CSS CDN -->
<script src="https://cdn.tailwindcss.com"></script>
```

---

## 🧪 本地调试说明

* 推荐本地搭建 SQLite + Node.js 后端用于模拟登录、资源管理接口。
* 所有接口结构按 RESTful 设计。
* 登录流程可使用 mock 微信扫码回调逻辑。

---

## 🧰 附加规范建议

| 类型       | 要求                                           |
| -------- | -------------------------------------------- |
| Token 存储 | 推荐用 `localStorage`，前端每次请求附带                  |
| 页面宽度     | 最大宽度 1280px，支持响应式布局                          |
| 按钮设计     | Element Plus 默认样式，主要按钮使用 `type="primary"`    |
| 图标       | 使用 Element Plus 自带 icon 或 CDN 方式引入 `iconify` |

