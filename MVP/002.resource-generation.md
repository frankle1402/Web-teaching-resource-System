## 📄 `CreateResource.vue` 页面开发说明文档（教师创建教学资源）

---

### 🧭 页面目标

教师通过本页面完成以下任务：

1. 输入基础信息（课程、专业、层次、主题等）
2. 调用 AI 生成教学大纲和简明内容
3. 选择模板（默认提供两个）
4. 自动生成 HTML 内容
5. 使用可视化编辑器进行进一步修改（可切换代码模式）
6. 保存或发布资源

---

## 🗂 页面结构和模块划分

```
CreateResource.vue
├── BasicInfoForm           # 基本信息表单（课程/层次/专业/主题）
├── TemplateSelector         # 模板选择模块（单选）
├── AIGenerationPanel        # AI生成交互模块（大纲 + 内容）
├── EditorPanel              # HTML 编辑器（WYSIWYG + 代码切换）
├── ActionFooter             # 底部操作栏（保存/发布/取消）
```

---

## 1️⃣ BasicInfoForm 模块

### 功能说明：

* 用户填写资源基础信息，供 AI 使用 + 资源元数据记录
* 表单字段：

  * 课程名称（文本框）
  * 教学层次（下拉框：中职、高职、本科）
  * 所属专业（下拉 + 支持输入）
  * 教学主题（单行文本）

### 开发要点：

* 所有字段为必填，需校验
* 使用 Element Plus 的表单组件 `<el-form>`
* 可将专业与课程设为自动补全（本地 mock 数据）

---

## 2️⃣ TemplateSelector 模块

### 功能说明：

* 教师选择一个模板来决定资源样式与结构
* 默认提供 2 个模板（简洁风、板书风）
* 每个模板展示效果缩略图 + 简要描述

### 开发要点：

* 模板数据从接口 `/api/templates` 获取（mock）
* 使用 `<el-card>` 列表展示，支持 hover 高亮、选中样式
* 默认选中第一个模板

---

## 3️⃣ AIGenerationPanel 模块

### 功能说明：

* 点击“生成大纲”后，系统调用 AI 返回课程结构
* 用户确认后点击“生成内容”生成 HTML 内容

### UI流程：

1. 生成大纲按钮 → 展示大纲区域
2. 确认大纲后 → “生成内容”按钮启用
3. 内容生成完成后 → 编辑器区域展示 HTML 内容

### 开发要点：

* 接口：

  * `POST /api/ai/outline` → 输入：课程、专业、层次、主题 → 输出：结构化大纲
  * `POST /api/ai/content` → 输入：大纲、模板ID、提示词 → 输出：HTML片段
* AI调用需展示 loading 状态，防止重复点击
* 所有调用结果需在页面中缓存，避免丢失

---

## 4️⃣ EditorPanel 模块

### 功能说明：

* 对 AI 生成的 HTML 进行编辑优化
* 支持两种模式：

  * 可视化编辑（WYSIWYG）
  * HTML 代码编辑

### 开发要点：

* 使用 **TipTap 编辑器**

  * 插件支持：段落、标题、粗斜体、列表、图片上传、表格、代码块
* 添加按钮切换 `可视化编辑 / HTML模式`
* 每次修改后自动保存草稿（调用 `POST /api/resource/draft`）

---

## 5️⃣ ActionFooter 模块

### 按钮功能：

| 按钮   | 功能                                   |
| ---- | ------------------------------------ |
| 保存草稿 | 保存当前内容（status: "draft"）              |
| 发布   | 保存并生成 UUID 访问地址（status: "published"） |
| 取消   | 返回资源列表，不保存                           |

### 发布后逻辑：

* 后端接口 `POST /api/resource/create`

  * 包含：用户ID、HTML内容、基础信息、模板ID、状态字段
  * 返回：UUID + 访问地址（用于嵌入）

---

## 📡 接口依赖汇总

| 接口                     | 方法   | 功能        |
| ---------------------- | ---- | --------- |
| `/api/templates`       | GET  | 获取模板列表    |
| `/api/ai/outline`      | POST | 生成教学大纲    |
| `/api/ai/content`      | POST | 生成HTML内容  |
| `/api/resource/draft`  | POST | 保存草稿      |
| `/api/resource/create` | POST | 创建资源（含发布） |

---

## 🧰 技术细节规范

| 要素         | 规范说明                                         |
| ---------- | -------------------------------------------- |
| 表单校验       | 所有字段为必填，Element Plus 原生校验机制                  |
| Loading 状态 | 所有 AI 接口调用必须展示加载动画并禁用按钮                      |
| 响应式布局      | 页面需适配移动端，建议使用 Element Plus 栅格布局              |
| 图片上传       | 使用 Element Plus `<el-upload>`，上传到本地 /mock 接口 |
| 占位说明       | 所有字段支持 `placeholder` 与 `?` 图标说明组件            |
| 错误处理       | 所有接口返回异常需弹出 `<el-message type="error">`      |

---

## ✅ 成功标准

* 用户从 0 到生成并发布一份资源 < 5 分钟
* 所有生成内容结构清晰、页面不崩溃
* 保存、发布后页面跳转回资源列表页 `/dashboard/resources`