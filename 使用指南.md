# 教学资源生成与管理系统 - 快速启动指南

## 系统简介

本系统是面向医卫类教师的教学资源生成平台，允许教师通过 AI 和可视化编辑器创建 HTML 教学资源，并发布到互联网进行公开访问与嵌入。

---

## 一、环境准备

### 1.1 检查 Node.js

首先确保你的电脑已安装 Node.js（版本 >= 18.0.0）

**检查方法:**
1. 打开命令行（按 `Win + R`，输入 `cmd`，回车）
2. 输入以下命令：
```bash
node -v
```
3. 如果显示版本号（如 `v18.0.0` 或更高），说明已安装
4. 如果提示"不是内部或外部命令"，请先安装 Node.js

**下载安装 Node.js:**
- 访问官网：https://nodejs.org/
- 下载 LTS 版本（长期支持版）
- 运行安装程序，一路点击"下一步"完成安装

---

## 二、启动系统

### 方式一：一键启动（推荐）⭐

这是最简单的方式，适合所有用户。

#### 步骤 1：找到启动文件

在项目文件夹中找到 `start.bat` 文件

```
Web-teaching-resource-System/
├── start.bat          ← 双击这个文件启动系统
├── stop.bat           ← 双击这个文件停止系统
├── backend/           ← 后端服务文件夹
├── frontend/          ← 前端应用文件夹
└── 使用指南.md        ← 你正在看的文档
```

#### 步骤 2：双击运行

1. 双击 `start.bat` 文件
2. 会弹出一个命令行窗口，显示启动进度
3. 系统会自动完成以下操作：
   - ✓ 检查 Node.js 环境
   - ✓ 安装后端依赖（仅首次运行）
   - ✓ 安装前端依赖（仅首次运行）
   - ✓ 启动后端服务（端口 8080）
   - ✓ 启动前端服务（端口 5173）
   - ✓ 自动打开浏览器

#### 步骤 3：开始使用

浏览器会自动打开系统登录页面：
- **地址：** http://localhost:5173
- **测试账号：** 13800138000 或 13900139000
- **密码：** 无需密码（模拟登录）

### 方式二：手动启动

适合需要查看详细日志的开发者。

#### 步骤 1：启动后端

1. 打开第一个命令行窗口
2. 进入后端目录：
```bash
cd backend
```
3. 安装依赖（仅首次）：
```bash
npm install
```
4. 启动后端服务：
```bash
npm run dev
```
5. 看到 "教学资源生成与管理系统 - 后端服务" 提示表示启动成功

#### 步骤 2：启动前端

1. 打开第二个命令行窗口（保持第一个窗口运行）
2. 进入前端目录：
```bash
cd frontend
```
3. 安装依赖（仅首次）：
```bash
npm install
```
4. 启动前端服务：
```bash
npm run dev
```
5. 看到 "Local: http://localhost:5173/" 表示启动成功

#### 步骤 3：访问系统

打开浏览器，访问：http://localhost:5173

---

## 三、停止系统

### 方式一：使用停止脚本（推荐）

1. 双击 `stop.bat` 文件
2. 系统会自动查找并停止所有相关服务
3. 命令行窗口会自动关闭

### 方式二：手动停止

在启动服务的命令行窗口中：
- 按 `Ctrl + C`
- 看到提示后输入 `Y` 并回车
- 关闭命令行窗口

---

## 四、常见问题

### ❌ 问题 1：双击 start.bat 后窗口一闪而过

**原因：** 没有安装 Node.js

**解决方法：**
1. 按照"一、环境准备"中的��明安装 Node.js
2. 重新双击 `start.bat`

### ❌ 问题 2：提示"端口被占用"

**原因：** 8080 或 5173 端口已被其他程序使用

**解决方法：**
1. 使用 `stop.bat` 停止之前的服务
2. 或者重启电脑
3. 重新运行 `start.bat`

### ❌ 问题 3：前端页面无法访问后端

**原因：** 后端服务没有启动

**解决方法：**
1. 检查后端服务窗口是否还在运行
2. 如果已关闭，重新运行 `start.bat`
3. 确保后端窗口显示"数据库初始化成功"

### ❌ 问题 4：浏览器显示"连接被拒绝"

**原因：** 服务还未完全启动

**解决方法：**
1. 等待 10-15 秒
2. 刷新浏览器页面
3. 检查命令行窗口是否有错误提示

### ❌ 问题 5：依赖安装失败

**原因：** 网络问题或 npm 源速度慢

**解决方法：**
```bash
# 切换到淘宝镜像源
npm config set registry https://registry.npmmirror.com

# 然后重新安装
cd backend
npm install

cd ../frontend
npm install
```

---

## 五、系统功能概览

登录后可以访问以下功能：

### 📚 资源管理
- 查看所有教学资源
- 创建新的教学资源
- 编辑现有资源
- 删除资源

### 📁 文件夹管理
- 创建文件夹分类
- 整理教学资源
- 支持层级结构

### 🎨 模板中心
- 预设教学模板
- 快速创建资源
- 自定义模板

### ✨ AI 生成
- AI 辅助内容生成
- 智能教学设计
- 自动化资源创建

### 📝 可视化编辑器
- 所见即所得编辑
- 富文本格式支持
- 实时预览

### 🌐 发布与分享
- 发布资源到互联网
- 生成公开访问链接
- 支持嵌入到其他网站

---

## 六、端口说明

系统启动后会占用以下端口：

| 服务 | 端口 | 地址 | 说明 |
|------|------|------|------|
| 前端界面 | 5173 | http://localhost:5173 | 用户访问界面 |
| 后端API | 8080 | http://localhost:8080 | API接口服务 |

**注意：** 如果你的电脑上这些端口已被占用，可以在配置文件中修改：
- 后端端口：`backend/.env` 文件中的 `PORT`
- 前端端口：`frontend/vite.config.js` 文件中的 `server.port`

---

## 七、数据存储

### 数据库文件
- **位置：** `backend/database/teaching_resources.sqlite`
- **格式：** SQLite 数据库
- **备份：** 直接复制这个文件即可备份所有数据

### 重置数据库
如果需要清空所有数据重新开始：
1. 停止系统（运行 `stop.bat`）
2. 删除文件：`backend/database/teaching_resources.sqlite`
3. 重新启动系统（运行 `start.bat`）
4. 系统会自动创建全新的数据库

---

## 八、技术架构

### 前端技术栈
- **Vue 3** - 渐进式 JavaScript 框架
- **Vite** - 下一代前端构建工具
- **Element Plus** - Vue 3 组件库
- **Pinia** - 状态管理
- **Vue Router** - 路由管理
- **TipTap** - 富文本编辑器

### 后端技术栈
- **Node.js** - JavaScript 运行环境
- **Express** - Web 应用框架
- **SQL.js** - SQLite 数据库（内存模式）
- **JWT** - 用户认证
- **Multer** - 文件上传处理

---

## 九、开发者信息

### 项目目录结构
```
Web-teaching-resource-System/
├── backend/                 # 后端服务
│   ├── src/
│   │   ├── controllers/     # 业务逻辑控制器
│   │   ├── routes/          # API 路由定义
│   │   ├── middlewares/     # 中间件（认证、错误处理）
│   │   ├── database/        # 数据库连接和初始化
│   │   └── app.js           # 应用入口
│   ├── database/            # 数据库文件存储
│   ├── package.json         # 后端依赖配置
│   └── .env                 # 环境变量配置
├── frontend/                # 前端应用
│   ├── src/
│   │   ├── components/      # 可复用组件
│   │   ├── pages/           # 页面组件
│   │   ├── router/          # 路由配置
│   │   ├── store/           # Pinia 状态管理
│   │   ├── api/             # API 请求封装
│   │   └── main.js          # 应用入口
│   ├── package.json         # 前端依赖配置
│   └── vite.config.js       # Vite 配置
├── docs/                    # 项目文档
├── MVP/                     # 产品需求文档
├── start.bat                # 一键启动脚本
├── stop.bat                 # 停止服务脚本
└── 使用指南.md              # 本文档
```

### 修改配置

**后端配置** (`backend/.env`)
```env
PORT=8080                      # 后端服务端口
NODE_ENV=development           # 运行环境
DB_PATH=./database/teaching_resources.sqlite  # 数据库路径
JWT_SECRET=your_secret_key     # JWT 密钥（生产环境请修改）
AI_API_KEY=your_api_key        # AI 服务密钥
FRONTEND_URL=http://localhost:5173  # 前端地址（CORS 配置）
BASE_URL=http://localhost:8080      # 后端地址
```

**前端代理配置** (`frontend/vite.config.js`)
```javascript
server: {
  port: 5173,                  // 前端服务端口
  proxy: {
    '/api': {
      target: 'http://localhost:8080',  // 后端地址
      changeOrigin: true
    }
  }
}
```

---

## 十、获取帮助

### 文档资源
- **产品需求文档：** `MVP/000.PRD.md`
- **开发指南：** `CLAUDE.md`
- **数据库设计：** `docs/database.sql`

### 问题反馈
如果遇到问题或有功能建议，请通过以下方式反馈：
- 提交 Issue 到项目仓库
- 联系项目维护者

---

## 附录：测试账号列表

系统使用模拟登录，以下手机号均可使用：

| 手机号 | 说明 |
|--------|------|
| 13800138000 | 测试账号 1 |
| 13900139000 | 测试账号 2 |
| 13700137000 | 测试账号 3 |
| 13600136000 | 测试账号 4 |

**注意：** 这是模拟登录系统，无需密码，直接输入手机号即可登录。

---

## 快捷命令参考

### Windows 批处理
```batch
start.bat          # 启动系统
stop.bat           # 停止系统
```

### 手动启动命令
```bash
# 后端
cd backend
npm install        # 安装依赖（仅首次）
npm run dev        # 启动开发服务器

# 前端
cd frontend
npm install        # 安装依赖（仅首次）
npm run dev        # 启动开发服务器
```

### 构建生产版本
```bash
# 前端构建
cd frontend
npm run build      # 构建生产版本到 dist/
npm run preview    # 预览生产构建
```

---

**祝您使用愉快！** 🎉
